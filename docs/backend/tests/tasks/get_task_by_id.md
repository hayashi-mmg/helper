# 特定タスク取得APIテストシナリオ

## エンドポイント
`GET /api/v1/tasks/{task_id}`

## 概要
このテストシナリオでは、特定のタスクを取得するAPIの機能を検証します。タスクIDを指定して個別のタスク情報を取得する機能をテストします。

## 前提条件
- テストユーザーが存在している
- テストユーザーに関連するタスクが存在している
- 別のユーザーとそのタスクも存在している

## テストケース

### TC-001: 正常系 - 自分のタスクを取得
**入力**
- リクエストヘッダー: 有効なアクセストークン
- URLパラメータ: 自分のタスクのID

**期待結果**
- ステータスコード: 200 OK
- レスポンスボディ: 指定したIDのタスク情報（id, title, description, status等）

### TC-002: 正常系 - 管理者が他のユーザーのタスクを取得
**入力**
- リクエストヘッダー: 有効な管理者アクセストークン
- URLパラメータ: 他のユーザーのタスクのID

**期待結果**
- ステータスコード: 200 OK
- レスポンスボディ: 指定したIDのタスク情報

### TC-003: 正常系 - ヘルパーが担当ユーザーのタスクを取得
**入力**
- リクエストヘッダー: 有効なヘルパーアクセストークン
- URLパラメータ: 担当ユーザーのタスクのID

**期待結果**
- ステータスコード: 200 OK
- レスポンスボディ: 指定したIDのタスク情報

### TC-004: 異常系 - 存在しないタスクID
**入力**
- リクエストヘッダー: 有効なアクセストークン
- URLパラメータ: 存在しないタスクID（例: 9999）

**期待結果**
- ステータスコード: 404 Not Found
- エラーメッセージ: タスクが存在しないことを示すメッセージ

### TC-005: 異常系 - 他のユーザーのタスクへのアクセス
**入力**
- リクエストヘッダー: 一般ユーザーのアクセストークン
- URLパラメータ: 他のユーザーのタスクのID

**期待結果**
- ステータスコード: 403 Forbidden
- エラーメッセージ: アクセス権限がないことを示すメッセージ

### TC-006: 異常系 - 未認証アクセス
**入力**
- リクエストヘッダー: アクセストークンなし
- URLパラメータ: 有効なタスクID

**期待結果**
- ステータスコード: 401 Unauthorized
- エラーメッセージ: 認証が必要であることを示すメッセージ

### TC-007: 異常系 - 無効なタスクID形式
**入力**
- リクエストヘッダー: 有効なアクセストークン
- URLパラメータ: 無効な形式のタスクID（例: "abc"）

**期待結果**
- ステータスコード: 422 Unprocessable Entity
- エラーメッセージ: タスクIDの形式が無効であることを示すメッセージ

## モック設定
- データベースに複数のユーザーとタスクのレコードを事前に用意
- 異なるユーザーに属するタスクを含める
- ヘルパー・ユーザー関連付けを設定

## 検証項目
- 正しいタスク情報が取得できること
- 認証の検証
- 認可（アクセス権限）の検証
- 存在しないリソースへのアクセス時の適切なエラーハンドリング
- 無効なIDパラメータのハンドリング
