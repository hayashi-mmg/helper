# レビューチェックリスト

このドキュメントは、コードレビューを効率的かつ包括的に行うためのチェックリストを提供します。開発→承認フローにおけるレビューフェーズで活用してください。

## 共通コンポーネント実装状況

### 認証関連

- [x] LoginForm（ログインフォーム）
- [x] RegisterForm（ユーザー登録フォーム）
- [x] PasswordResetForm（パスワードリセットフォーム）
- [x] AuthProtector（認証保護コンポーネント）
- [x] AuthStatus（認証状態表示コンポーネント）
- [x] 共通インデックスファイル

## レビュー前の準備

- [ ] 対象のブランチを最新の状態にする（developブランチとの同期）
- [ ] タスク記録ファイル（`dev-logs/tasks/task-XXX.md`）を確認
- [ ] 実装要件と変更内容の整合性を把握

## コード品質のチェック

### 1. コーディングスタイル

- [ ] プロジェクトのコーディング規約に準拠しているか
- [ ] インデントや行長が適切か
- [ ] 命名規則が守られているか（変数、関数、クラス、ファイル）
- [ ] 不要なコメントアウトコードや未使用変数がないか
- [ ] PrettierとESLintのチェックがパスしているか

### 2. 機能実装

- [ ] 実装が要件を満たしているか
- [ ] エッジケースが適切に処理されているか
- [ ] エラーハンドリングが適切に実装されているか
- [ ] パフォーマンスを考慮した実装になっているか
- [ ] セキュリティ上の懸念事項がないか

### 3. コンポーネント設計

- [ ] 単一責任の原則に従っているか
- [ ] コンポーネントの分類が適切か（atoms/molecules/organisms）
- [ ] Props設計が適切か（必須/オプション、デフォルト値）
- [ ] 適切な粒度で分割されているか
- [ ] 再利用性を考慮した設計になっているか

### 4. 型安全性

- [ ] TypeScriptの型定義が適切か
- [ ] 不必要な `any` 型の使用がないか
- [ ] 型アサーションの使用が最小限か
- [ ] インターフェースと型の使い分けが適切か
- [ ] ジェネリック型の活用が適切か

### 5. 状態管理

- [ ] 適切な状態管理手法が選択されているか（useState, useReducer, Context, Zustand等）
- [ ] 状態の更新が不変性を保持しているか
- [ ] グローバル状態と局所状態の使い分けが適切か
- [ ] 不要な再レンダリングが発生していないか
- [ ] メモ化（useMemo, useCallback）が必要な箇所で使われているか

## テストのチェック

### 1. テスト網羅性

- [ ] 主要なコードパスがテストでカバーされているか
- [ ] エッジケースのテストが含まれているか
- [ ] 正常系と異常系の両方がテストされているか
- [ ] コードカバレッジが目標（80%以上）を満たしているか
- [ ] モックとスタブが適切に使用されているか

### 2. テスト品質

- [ ] テストが明確で理解しやすいか
- [ ] テストの分類（describe, it）が適切か
- [ ] テストの前提条件がセットアップされているか
- [ ] アサーションが具体的で明確か
- [ ] テストが安定しているか（フラッキーなテストがないか）

### 3. テスト実装

- [ ] テスト要素の選択方法が適切か（getByRole優先）
- [ ] テストIDの使用が最小限に抑えられているか
- [ ] 非同期処理のテストが適切に実装されているか
- [ ] テストのクリーンアップが行われているか
- [ ] テストがコンポーネントの仕様を正確に反映しているか

## ドキュメントのチェック

### 1. コードドキュメント

- [ ] 複雑なロジックに適切なコメントがあるか
- [ ] 公開API/コンポーネントにJSDocコメントがあるか
- [ ] コメントが最新の状態か（古いコメントがないか）
- [ ] コード自体が自己説明的か（過剰なコメントがないか）
- [ ] 設計上の重要な決定が文書化されているか

### 2. ユーザードキュメント

- [ ] 必要に応じてREADMEが更新されているか
- [ ] 新機能の使用方法が文書化されているか
- [ ] Storybookの例が更新/作成されているか
- [ ] APIの変更がドキュメントに反映されているか
- [ ] 破壊的変更がある場合、移行ガイドがあるか

## パフォーマンスとアクセシビリティ

### 1. パフォーマンス

- [ ] 不要な再レンダリングを避ける最適化が行われているか
- [ ] 大きなリストには仮想化が適用されているか
- [ ] メモリリークの可能性がないか（特にuseEffect内）
- [ ] ネットワークリクエストが最適化されているか
- [ ] バンドルサイズへの影響が考慮されているか

### 2. アクセシビリティ

- [ ] 適切なHTML要素とARIA属性が使用されているか
- [ ] キーボードナビゲーションがサポートされているか
- [ ] 色のコントラスト比が十分か
- [ ] スクリーンリーダー対応が適切か
- [ ] フォーカス管理が適切に行われているか

## レビュー結果の記録

レビュー完了後、以下の内容をタスク記録に追加します：

```markdown
## レビューコメント (YYYY-MM-DD)

### 主要な指摘事項
1. [重要な指摘1の概要]
2. [重要な指摘2の概要]
3. [重要な指摘3の概要]

### 軽微な改善点
- [軽微な改善点1]
- [軽微な改善点2]
- [軽微な改善点3]

### 推奨事項
- [推奨事項1]
- [推奨事項2]

### レビュー結果
- [ ] 修正なしで承認
- [ ] 軽微な修正後に承認可能
- [ ] 重要な修正が必要
- [ ] 大幅な再設計が必要
```

## 承認基準

レビュー後の承認判断は以下の基準に基づいて行います：

1. **修正なしで承認**
   - 実装が要件を完全に満たしている
   - コードがプロジェクト標準に完全に準拠している
   - テストが十分に実装されている
   - ドキュメントが適切に更新されている

2. **軽微な修正後に承認可能**
   - 小さな問題のみが存在する
   - 機能的には問題ない
   - 修正が簡単で短時間で対応可能
   - 再レビューの必要性が低い修正内容

3. **重要な修正が必要**
   - 機能的な問題がある
   - 設計上の問題がある
   - テストが不十分
   - パフォーマンスやセキュリティ上の問題がある
   - 修正後に再レビューが必要

4. **大幅な再設計が必要**
   - 根本的な設計上の問題がある
   - 要件を満たしていない
   - 保守が困難なコード構造
   - 重大なセキュリティリスクがある

## レビュー時の心構え

- 批判ではなく建設的なフィードバックを心がける
- コードではなく問題点に焦点を当てる
- 個人的な好みと客観的な問題を区別する
- 優先順位をつけてフィードバックを提供する
- レビュイーの成長を促す機会と捉える
- ポジティブな点も指摘する

---

最終更新日: 2025-04-11
