# マークダウンCMS フロントエンド開発計画

## 1. プロジェクト概要

本プロジェクトは、ヘルパー支援を目的としたマークダウンCMSシステムです。ユーザー（依頼者）がヘルパーに対して食べたい料理やお願いしたいことを事前に登録し、ヘルパーがそれらの情報をウェブ上で確認できるようにするシステムとなっています。

## 2. 技術スタック

React + Vite を基盤とした最新のフロントエンド環境を構築します。

- **フレームワーク**: React 18
- **ビルドツール**: Vite
- **言語**: TypeScript
- **UIライブラリ**: Material-UI または Chakra UI
- **状態管理**: Zustand
- **ルーティング**: React Router
- **API通信**: Axios + React Query
- **QRコード関連**: qrcode.react（生成）, react-qr-reader（読み取り）
- **多言語対応**: react-i18next
- **テスト**: Jest + React Testing Library
- **コード品質**: ESLint + Prettier

## 3. プロジェクト構造

Atomic Designパターンに基づいたコンポーネント設計を採用し、機能単位でモジュールを分割します。

```
frontend/
├── public/                  # 静的ファイル
├── src/
│   ├── components/          # 共通UIコンポーネント
│   │   ├── atoms/           # 最小単位のUI要素
│   │   ├── molecules/       # 小さな機能単位
│   │   └── organisms/       # 大きな機能単位
│   ├── features/            # 機能ごとのモジュール
│   │   ├── auth/            # 認証関連
│   │   ├── recipes/         # レシピ管理関連
│   │   ├── requests/        # リクエスト管理関連
│   │   ├── feedback/        # フィードバック関連
│   │   └── qrcode/          # QRコード機能関連
│   ├── hooks/               # カスタムフック
│   ├── lib/                 # 外部ライブラリラッパー
│   ├── services/            # APIサービス
│   ├── store/               # 状態管理
│   ├── styles/              # グローバルスタイル
│   ├── utils/               # ユーティリティ関数
│   ├── App.tsx              # メインアプリケーション
│   ├── main.tsx             # エントリーポイント
│   └── vite-env.d.ts        # 型定義
├── tests/                   # テストファイル
│   ├── components/          # コンポーネントテスト
│   ├── features/            # 機能テスト
│   └── setup.ts             # テスト設定
├── .eslintrc.js             # ESLint設定
├── .prettierrc              # Prettier設定
├── package.json             # 依存関係
├── tsconfig.json            # TypeScript設定
└── vite.config.ts           # Vite設定
```

## 4. 主要画面設計

仕様書に基づき、以下の主要画面を実装します。

### 4.1 共通コンポーネント

- ヘッダー（認証状態表示、言語切替、ユーザーメニュー）
- フッター（著作権情報、問い合わせリンク）
- ナビゲーションメニュー（ユーザー種別に応じたメニュー表示）
- 通知コンポーネント（トースト、ダイアログ）
- ローディングインジケーター

### 4.2 ユーザー側画面

1. **認証関連**
   - ログイン画面
   - ユーザー登録画面
   - パスワードリセット画面

2. **ダッシュボード**
   - サマリー情報表示
   - 最近のリクエスト一覧
   - 担当ヘルパー情報

3. **リクエスト管理**
   - リクエスト一覧画面
   - 料理リクエスト作成・編集画面（クックパッドURL登録機能付き）
   - お願いごと作成・編集画面

4. **ヘルパー管理**
   - ヘルパー一覧画面
   - ヘルパー追加・編集画面

5. **フィードバック**
   - フィードバック入力画面（味付け、食感、量の評価）
   - フィードバック履歴画面

6. **QRコード**
   - QRコード表示・印刷画面

### 4.3 ヘルパー側画面

1. **認証関連**
   - ログイン画面
   - アカウント情報画面

2. **ダッシュボード**
   - 担当ユーザー一覧
   - 未完了タスク一覧
   - スケジュール表示

3. **リクエスト管理**
   - ユーザー別リクエスト一覧画面
   - リクエスト詳細画面（レシピ情報表示）
   - タスク完了報告画面

4. **フィードバック**
   - フィードバック一覧画面
   - フィードバック詳細・返信画面

5. **QRコード**
   - QRコードスキャン画面
   - スキャン結果表示画面

### 4.4 管理者画面

1. **ユーザー管理**
   - ユーザー一覧・検索画面
   - ヘルパー一覧・検索画面
   - ユーザー編集画面

2. **システム管理**
   - 設定画面
   - ログ確認画面
   - バックアップ管理画面

## 5. 機能実装計画

### フェーズ1: 基盤開発（2週間）

1. **プロジェクト初期設定**
   - 開発環境設定
   - コンポーネントライブラリの選定と導入
   - ルーティング設定
   - 状態管理設定
   - API連携基盤

2. **認証機能の実装**
   - ログイン/ログアウト
   - ユーザー登録
   - 認証状態管理

3. **共通コンポーネント開発**
   - レイアウトコンポーネント
   - フォームコンポーネント
   - テーブルコンポーネント
   - 通知コンポーネント

### フェーズ2: コア機能開発（3週間）

1. **ユーザー側機能**
   - ダッシュボード
   - リクエスト作成・管理
   - ヘルパー管理

2. **ヘルパー側機能**
   - ダッシュボード
   - タスク確認・管理
   - 完了報告

### フェーズ3: 拡張機能開発（2週間）

1. **フィードバック機能**
   - フィードバック入力フォーム
   - 評価表示
   - 履歴表示

2. **QRコード機能**
   - QRコード生成機能
   - QRコード表示・印刷機能
   - QRコードスキャン機能

### フェーズ4: アクセシビリティ・多言語対応（1週間）

1. **アクセシビリティ対応**
   - スクリーンリーダー対応
   - キーボードナビゲーション
   - コントラスト調整

2. **多言語対応**
   - 日本語・英語対応
   - 言語切替機能

### フェーズ5: テスト・最適化（2週間）

1. **テスト実装**
   - 単体テスト
   - 統合テスト
   - E2Eテスト

2. **パフォーマンス最適化**
   - コード分割
   - 画像最適化
   - ビルド最適化

3. **PWA対応**
   - サービスワーカー設定
   - オフライン対応

## 6. アクセシビリティ・多言語対応

仕様書に記載されているアクセシビリティ要件と多言語対応を実現するため、以下の実装を行います。

### 6.1 アクセシビリティ対応

- **スクリーンリーダー対応**: ARIA属性の適切な実装
- **キーボードアクセシビリティ**: すべての機能がキーボードで操作可能
- **コントラスト対応**: 高コントラストモード、ダークモード
- **フォントサイズ調整**: テキストサイズの変更機能
- **アニメーション制御**: アニメーション無効化オプション

### 6.2 多言語対応

- **日本語・英語の完全サポート**: すべてのテキストを翻訳リソース化
- **中国語・韓国語のサポート**: 将来的な拡張のための基盤整備
- **言語切替インターフェース**: 簡単に言語を切り替えられるUI
- **地域に応じた日付・時間表示**: 各言語・地域に合わせたフォーマット対応

## 7. QRコード機能の実装

仕様書で特に強調されているQRコード機能を詳細に計画します。

### 7.1 QRコード生成機能

- **レシピURLのQRコード生成**: クックパッドなどの外部URLをQRコード化
- **システム内ページへのQRコード生成**: 内部ページへのディープリンク
- **フィードバックフォームへのQRコード生成**: 簡単にフィードバックを収集

### 7.2 QRコード表示・管理機能

- **QRコード印刷機能**: 印刷用レイアウト生成
- **複数QRコードの一括管理**: カテゴリ別、用途別の管理
- **有効期限設定**: セキュリティ向上のための期限付きQRコード

### 7.3 QRコードスキャン機能

- **モバイルデバイスでのスキャン**: カメラアクセスによるスキャン
- **結果に基づくリダイレクト**: スキャン後の適切な画面遷移
- **履歴管理**: スキャン履歴の保存と参照

## 8. テスト戦略

### 8.1 ユニットテスト

- 各コンポーネントの機能テスト
- カスタムフックのテスト
- ユーティリティ関数のテスト

### 8.2 統合テスト

- 複数コンポーネントの連携テスト
- 状態管理と連携したテスト
- API通信のモックを使用したテスト

### 8.3 E2Eテスト

- ユーザーフローの検証
- 実際のAPIと連携したテスト
- 複数のデバイス・画面サイズでのテスト

## 9. デプロイメント計画

### 9.1 開発環境

- **Docker**: フロントエンドの開発環境をコンテナ化
- **CI/CD**: GitHubアクションによる自動ビルド・テスト

### 9.2 ステージング環境

- **自動デプロイ**: develop ブランチへのマージで自動デプロイ
- **テスト環境**: バックエンドとの統合テスト環境

### 9.3 本番環境

- **静的サイトホスティング**: ビルド済みの静的ファイルをホスティング
- **CDN**: コンテンツ配信の高速化
- **監視**: エラー監視、パフォーマンス監視

## 10. ワークフロー統合

開発→承認ワークフローと連携するために、以下の点を考慮します：

1. **タスク管理の連携**
   - 各タスクに対応するブランチ命名規則の遵守
   - コミットメッセージにタスクIDを含める

2. **レビュープロセスの統合**
   - PRテンプレートの作成
   - レビューチェックリストの準備
   - 自動テスト結果の表示

3. **承認プロセスの統合**
   - 承認者向けのデプロイプレビュー環境
   - 承認後の自動マージ・デプロイ

## 11. スケジュール概要

| フェーズ | 期間 | 主要タスク |
|--------|------|-----------|
| 準備 | 1週間 | 環境設定、要件分析、詳細設計 |
| フェーズ1 | 2週間 | 基盤開発、認証機能 |
| フェーズ2 | 3週間 | コア機能開発 |
| フェーズ3 | 2週間 | 拡張機能開発 |
| フェーズ4 | 1週間 | アクセシビリティ・多言語対応 |
| フェーズ5 | 2週間 | テスト・最適化 |
| 総期間 | 11週間（約2.5ヶ月） | |

## 12. リスクと対策

| リスク | 影響度 | 対策 |
|--------|-------|------|
| バックエンドAPIの仕様変更 | 高 | 早期からのAPI連携テスト、モックサーバーの活用 |
| 多言語対応の工数増大 | 中 | 初期段階からの翻訳リソース管理設計、自動化ツール活用 |
| デバイス互換性の問題 | 中 | 複数デバイスでのテスト自動化、レスポンシブ設計の徹底 |
| QRコード機能の互換性 | 高 | 複数ブラウザ・デバイスでのテスト、フォールバック実装 |
| パフォーマンス問題 | 中 | 早期からのパフォーマンス計測、最適化の継続的実施 |

## まとめ

本開発計画では、マークダウンCMSフロントエンドの実装について、仕様書に基づいた機能要件を満たすための具体的なアプローチを提案しました。特にQRコード機能やアクセシビリティ対応、多言語対応など、重要な機能を確実に実装するための計画を立てています。

段階的な開発アプローチにより、基本機能から拡張機能まで確実に実装し、品質を確保するためのテスト戦略も含めています。また、開発→承認ワークフローとの連携も考慮し、スムーズなプロジェクト進行を実現します。

---

最終更新日: 2025-05-01