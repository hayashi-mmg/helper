承知しました。ヘルパー支援システム仕様書にQRコード表示機能の詳細を追加します。以下に追加部分を含めた仕様書の更新版を示します。

# ヘルパー支援システム仕様書（更新版）

## 1. システム概要

本システムは、ユーザー（依頼者）がヘルパーに対して食べたい料理やお願いしたいことを事前に登録し、ヘルパーがウェブ上でその情報を確認できるようにするシステムです。クックパッドのURLを登録することで、料理のレシピ情報も表示できます。また、調理済みの料理に対してフィードバックや次回への要望を記入する機能も備えています。

## 2. 主要機能

### 2.1 ユーザー機能
- ユーザー登録・ログイン機能
- 食べたい料理の登録機能（クックパッドURLの登録含む）
- お願いしたいことの登録機能
- 登録内容の編集・削除機能
- ヘルパーの登録・管理機能
- 調理済み料理へのフィードバック機能
  - 味付けの評価
  - 食感の評価
  - 量の評価
  - 次回調理への要望入力
  - 画像アップロード機能（調理済み料理の写真）

### 2.2 ヘルパー機能
- ヘルパー登録・ログイン機能
- 担当ユーザーの確認機能
- ユーザーの要望確認機能
- タスク完了報告機能
- メッセージ機能
- フィードバック閲覧機能
- フィードバックに対する返信機能
- 次回調理時の参考メモ作成機能
- QRコードスキャンによるレシピ・情報アクセス機能

### 2.3 管理者機能
- ユーザー・ヘルパーの管理機能
- システム設定管理機能
- データバックアップ機能

## 3. 画面設計

### 3.1 ユーザー側画面
- ログイン画面
- マイページ（ダッシュボード）
- 料理登録画面
- お願いごと登録画面
- ヘルパー登録・管理画面
- 設定画面
- 調理履歴一覧画面
- 料理フィードバック入力画面
- フィードバック履歴確認画面
- QRコード表示・印刷画面

### 3.2 ヘルパー側画面
- ログイン画面
- ダッシュボード（担当ユーザー一覧）
- ユーザー詳細画面（要望確認画面）
- タスク完了報告画面
- メッセージ画面
- 設定画面
- フィードバック一覧画面
- フィードバック詳細・返信画面
- 調理履歴・ノート画面
- QRコードスキャン結果表示画面

## 4～11. （省略 - 既存の内容）

## 12. QRコード表示機能

### 12.1 概要
ユーザーが登録した料理レシピや要望情報をQRコードとして表示し、ヘルパーがスマートフォンで簡単にアクセスできるようにする機能です。これにより、ヘルパーは印刷物を持ち歩く必要なく、必要な情報にすぐにアクセスできます。

### 12.2 主要機能
- 料理レシピURLのQRコード生成・表示機能
- 要望詳細ページへのQRコード生成・表示機能
- フィードバック入力フォームへのQRコード生成・表示機能
- 複数QRコードの一括印刷機能

### 12.3 QRコード生成の対象
- クックパッドなどの外部レシピURL
- システム内の料理詳細ページURL
- 要望詳細ページURL
- フィードバック入力フォームURL
- ヘルパー専用ダッシュボードURL

### 12.4 実装方法
- QRコード生成ライブラリ（qrcode.js等）を使用
- 各ページに「QRコードを表示」ボタンを設置
- モバイルデバイス向けのディープリンク対応

### 12.5 UI/UX設計
- QRコードはモーダルウィンドウで表示
- 印刷用に最適化されたQRコードサイズとレイアウト
- QRコード下部に対象情報のタイトルを表示
- スキャン手順の簡単なガイド表示

### 12.6 セキュリティ設計
- QRコードへのアクセスにはヘルパー認証を要求
- 期限付きURLの発行（24時間有効等）
- アクセスログの記録

### 12.7 具体的なユースケース

#### 12.7.1 個別レシピのQRコード
1. ユーザーが料理をリクエスト登録
2. システムがレシピページへのQRコードを生成
3. ユーザーまたはヘルパーが詳細画面で「QRコードを表示」ボタンをクリック
4. ヘルパーがスマートフォンでQRコードをスキャン
5. ブラウザが自動的にレシピページにアクセス

#### 12.7.2 一週間の調理予定QRコード
1. ヘルパーがダッシュボードで「今週の予定QRコード」ボタンをクリック
2. 今週の調理予定一覧ページへのQRコードが表示
3. ヘルパーがスマートフォンでスキャン
4. 一週間分の調理予定とレシピリンクにアクセス

#### 12.7.3 フィードバック入力QRコード
1. ヘルパーが調理完了報告時にフィードバック用QRコードを生成
2. ユーザーにフィードバック入力用QRコードを提示
3. ユーザーがスマートフォンでスキャン
4. フィードバック入力フォームに直接アクセス

### 12.8 開発工数
- フロントエンド：2日間（QRコード表示コンポーネント実装）
- バックエンド：1日間（QRコード生成API実装）
- テスト：1日間
- 合計：4日間

### 12.9 API設計
```
POST /api/qrcode/generate
Request:
{
  "url": "string",  // QRコード化するURL
  "title": "string", // QRコード下部に表示するタイトル
  "size": "number",  // QRコードサイズ（ピクセル）
  "expiration": "number" // 有効期限（秒）
}

Response:
{
  "qrcode_image_url": "string", // 生成されたQRコード画像のURL
  "expire_at": "datetime" // 有効期限日時
}
```

### 12.10 画面設計の変更点
- 料理詳細画面：「QRコードを表示」ボタン追加
- ヘルパーダッシュボード：「今週の予定QRコード」ボタン追加
- 調理完了報告画面：「フィードバックQRコード生成」オプション追加
- QRコード表示モーダル：QRコード画像、タイトル、URLテキスト、「印刷」ボタン
- QRコード一括印刷画面：選択した複数のQRコードをA4用紙に最適化して印刷

### 12.11 テーブル設計追加
```
QRCodeTable:
- id (主キー)
- target_type (対象タイプ：RECIPE, TASK, FEEDBACK_FORM など)
- target_id (対象ID)
- url (QRコードが指すURL)
- title (QRコードのタイトル)
- created_at (作成日時)
- expire_at (有効期限)
- created_by (作成者ID)
- access_count (アクセス回数)
```

### 12.12 将来的な拡張
- 複数QRコードを含むPDFの生成・出力機能
- QRコード付きレシピカードの自動生成
- スマートフォンアプリとの連携によるQRコードスキャン機能の強化
- 位置情報を活用したアクセス管理（登録住所付近でのみスキャン可能など）

## 13. 開発スケジュール（更新版）
- 要件定義・設計：2週間
- フロントエンド開発：4週間
- バックエンド開発：4週間
- データベース構築：1週間
- API開発：2週間
- QRコード機能開発：4日間（既存スケジュールと並行）
- 結合テスト：2週間
- システムテスト：1週間
- デプロイ：1週間
- 総開発期間：15週間（約3.5ヶ月）
## 14. 多言語対応・アクセシビリティ

### 14.1 概要
本システムは幅広いユーザー層に対応するため、多言語対応及びアクセシビリティ機能を実装します。これにより、言語の壁や身体的制約に関わらず、すべてのユーザーがシステムを利用できるようになります。

### 14.2 多言語対応機能
- 日本語・英語の完全サポート（第一フェーズ）
- 中国語・韓国語のサポート（第二フェーズ）
- 言語選択機能（ユーザープロファイル設定およびログイン画面）
- 動的言語切替機能（セッション中の言語変更）
- 地域に応じた日付・時間・通貨表示フォーマット対応

### 14.3 翻訳システム
- 言語リソースファイルによる管理
- APIベースの自動翻訳バックアップシステム
- ユーザー生成コンテンツ（コメント・フィードバック）の翻訳機能
- 専門用語辞書の実装（料理・介護用語）

### 14.4 視覚障害者向け機能
- スクリーンリーダー対応（ARIA属性の実装）
- 音声読み上げ機能（TextToSpeech）
  - レシピ内容の音声ガイド
  - 操作ガイダンスの音声案内
  - 通知の音声読み上げ
- キーボードショートカットの充実
- フォーカス可視化の強化

### 14.5 UI調整機能
- 文字サイズ調整機能（小・中・大・特大）
- 高コントラストモード
  - ダークモード
  - ハイコントラストモード
  - カラーブラインドモード（色覚特性対応）
- 行間・文字間隔の調整機能
- アニメーション・動きの制御機能

### 14.6 入力支援
- 音声入力対応
- 予測テキスト入力
- 自動修正機能
- 入力フォームの補助ラベル・説明

### 14.7 アクセシビリティ基準適合
- WCAG 2.1 AA基準への適合
- JIS X 8341-3:2016への準拠
- 定期的なアクセシビリティ監査の実施

### 14.8 開発工数
- 多言語対応基盤：2週間
- 翻訳リソース作成：2週間（言語あたり）
- アクセシビリティ対応：3週間
- テスト：2週間
- 合計：9週間（基本2言語の場合）

### 14.9 テスト計画
- スクリーンリーダーテスト（NVDA, VoiceOver, JAWS）
- キーボードナビゲーションテスト
- 色コントラスト分析
- 多言語表示テスト
- ユーザビリティテスト（障害のあるユーザー参加）

### 14.10 将来拡張
- 音声コマンド機能
- AI支援型の読み上げ最適化
- リアルタイム翻訳機能
- 点字ディスプレイ対応
- AR/VRインターフェースのアクセシビリティ対応